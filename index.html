<!DOCTYPE html><html><head><title>shim - A utility library for Lua</title><link rel="stylesheet" href="public/style.css"><meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"></head><body><section id="top"><div id="menu"><!--a#toggle(href='#'): i.icon-menu menu
ul
  each x in section
    li: a(href='#')= x
--></div><div id="heading"><div id="logo">shim</div><div id="tagline">A utility library for Lua</div></div></section><section><div class="content"><h1 id="introduction">introduction</h1><p><p><code>shim.lua</code> is a utility library for lua, which deeply inspired by <a href="https://github.com/jashkenas/underscore">Underscore.js</a>, <a href="https://github.com/lodash/lodash">Lodash.js</a>, <a href="https://github.com/Yonaba/Moses">Moses</a></p>
<h2 id="install">Install</h2>
<pre><code class="lang-bash">$ wget --no-check-certificate https://raw.githubusercontent.com/chunpu/Shim/master/shim.lua
</code></pre>
<h2 id="usage">Usage</h2>
<pre><code class="lang-lua">local _ = require &#39;shim&#39;
</code></pre>
</p></div></section><section><div class="content"><h1 id="util">util</h1><p><h2 id="isarray">isArray</h2>
<p>_.isArray(value)</p>
<p>Check if value is array</p>
<pre><code class="lang-lua">_.isArray({1, 2, 3})
-- → true

_.isArray({1, 2, 3, w = 4})
-- → false
</code></pre>
<h2 id="isequal">isEqual</h2>
<p>_.isEqual(a, b)</p>
<p>compare a and b is</p>
<ul>
<li>same table</li>
<li>value equal</li>
<li>deep equal</li>
</ul>
<p>it won&#39;t compare metatable</p>
<pre><code class="lang-lua">_.isEqual(1, 1)
-- → true

_.isEqual({a = 1}, {a = 1})
-- → true

_.isEqual({}, {})
-- → true
</code></pre>
<h2 id="trim">trim</h2>
<p>_.trim(string, [where])</p>
<pre><code class="lang-lua">_.trim(&#39;  abc   &#39;)
-- → &#39;abc&#39;

_.trim(&#39;    &#39;)
-- → &#39;&#39;

_.trim(&#39;  abc  &#39;, &#39;right&#39;)
-- → &#39;  abc&#39;

_.trim(&#39;  abc  &#39;, &#39;left&#39;)
-- → &#39;abc  &#39;
</code></pre>
<h2 id="extend">extend</h2>
<p>_.extend(dst, ...)</p>
<pre><code class="lang-lua">_.extend({a = 1}, {b = 2})
-- → {a = 1, b = 2}

_.extend({a = 1, b = 2}, {b = 3})
-- → {a = 1, b = 3}

_.extend({a = 1}, {b = 2}, {c = 3}
-- → {a = 1, b = 2, c = 3}
</code></pre>
<h2 id="split">split</h2>
<p>_.split(str, sep)</p>
<pre><code class="lang-lua">_.split(&#39;q,w,e,r&#39;, &#39;,&#39;)
-- → {&#39;q&#39;, &#39;w&#39;, &#39;e&#39;, &#39;r&#39;}

_.split(&#39;qwer as&#39;, &#39;&#39;
-- → {&#39;q&#39;, &#39;w&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;a&#39;, &#39;s&#39;}
</code></pre>
<h2 id="empty">empty</h2>
<p>_.empty(value)</p>
<pre><code class="lang-lua">_.empty(false)
_.empty({})
_.empty(0)
_.empty(&#39;&#39;)
-- → true

_.empty(1)
_.empty(&#39;0&#39;)
_.empty(true)
-- → false
</code></pre>
<h2 id="only">only</h2>
<p>_.only(table, keys)</p>
<pre><code class="lang-lua">_.only({
    a = 1,
    b = 2,
    c = 3
}, {&#39;a&#39;, &#39;b&#39;})
-- &gt;
{a = 1, b = 2}

_.only({
    a = 1,
    b = 2,
    c = 3,
    d = 4
}, &#39;a c d&#39;)
-- &gt;
{
    a = 1,
    c = 3,
    d = 4
}
</code></pre>
<h2 id="assertequal">assertEqual</h2>
<p>_.assertEqual(actual, expect, [level = 2])</p>
<p>same like <code>_.isEqual</code>, but will throw an assertion error when <code>_.isEqual</code> return false</p>
<h2 id="ok">ok</h2>
<p>_.ok(...)</p>
<p>mostly used in multi test cases, also throw assertion error when fail to match</p>
<pre><code class="lang-lua">_.ok(true)

_.ok(false) -- &gt; throw error

_.ok({
    1, 1
}, {
    2, 2
})
-- sugar for
_.assertEqual(1, 1)
_.assertEqual(2, 2)
</code></pre>
<h2 id="dump">dump</h2>
<p>_.dump(value)</p>
<pre><code class="lang-lua">print(_.dump({
    a = 1,
    b = {
        a = 1,
        b = {2, 3, 4}
    }
}))

-- &gt;
{
    &#39;b&#39;: {
        &#39;b&#39;: [2, 3, 4],
        &#39;a&#39;: 1
    },
    &#39;a&#39;: 1
}
</code></pre>
<p>print function thread or others cannot <code>tostring</code> with <code>[type]</code></p>
<pre><code class="lang-lua">print(_.dump({
    thread = coroutine.create(function() end),
    object = coroutine
}))
-- &gt;
{
    &#39;thread&#39;: [thread],
    &#39;object&#39;: {
        &#39;create&#39;: [function],
        &#39;running&#39;: [function],
        &#39;status&#39;: [function],
        &#39;wrap&#39;: [function],
        &#39;yield&#39;: [function],
        &#39;resume&#39;: [function]
    }
}
</code></pre>
</p></div></section><section><div class="content"><h1 id="array">array</h1><p><p>most array functions can be used on string too</p>
<h2 id="each">each</h2>
<p>_.each(array, func)</p>
<p>Iterates the array table, executing the callback for each element</p>
<h2 id="_each">_each</h2>
<p>_._each(array, func)</p>
<p>like <code>_.each</code> above, but break loop when <code>func</code> return <code>false</code></p>
<h2 id="every">every</h2>
<p>_.every(array, func)</p>
<h2 id="some">some</h2>
<p>_.some(array, func)</p>
<h2 id="map">map</h2>
<p>_.map(array, func)</p>
<h2 id="has">has</h2>
<p>_.has(array|string, item)</p>
<h2 id="sub">sub</h2>
<p>_.sub(string, start, end)</p>
<h2 id="flatten">flatten</h2>
<p>_.flatten(array)</p>
<h2 id="push">push</h2>
<p>_.push(array, ...)</p>
<h2 id="uniq">uniq</h2>
<p>_.uniq(array)</p>
<h2 id="union">union</h2>
<p>_.union(...)</p>
<h2 id="sort">sort</h2>
<p>_.sort(array, func)</p>
<h2 id="filter">filter</h2>
<p>_.filter(array, func)</p>
<h2 id="indexof">indexOf</h2>
<p>_.indexOf(array|string, value, [from = 1], [isPlain = false])</p>
<p><code>isPlain = true</code> turns of the pattern matching facilities</p>
<h2 id="lastindexof">lastIndexOf</h2>
<p>_.lastIndexOf(array|string, value, [from = #array], [isPlain = false])</p>
<h2 id="difference">difference</h2>
<p>_.difference(array, other)</p>
<h2 id="without">without</h2>
<p>without</p>
<p>_.without(array, ...)</p>
<h2 id="reduce">reduce</h2>
<p>_.reduce(array, fn, [prev])</p>
<h2 id="invoke">invoke</h2>
<p>_.invoke(arr, fn)</p>
<p>just like map now</p>
</p></div></section><script src="http://code.jquery.com/jquery-2.1.1.min.js"></script><script src="public/app.js"></script></body></html>